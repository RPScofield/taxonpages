import{_ as y,e as r,f as l,p as T,q as m,s as B,r as d,t as b,h as v,v as h,j as V,x as g,F as q,i as N,y as A,z as C}from"./index-CV6KFYyF.js";const E={},F={viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"green"};function L(e,s){return l(),r("svg",F,[...s[0]||(s[0]=[T('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g></g>',1)])])}const P=y(E,[["render",L]]),R={class:"tp-autocomplete md:block relative w-fit"},$={class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},j={key:1,class:"tp-autocomplete__list list absolute z-[500] max-h-52 w-full overflow-y-auto border bg-base-foreground border-base-border !m-0 shadow-md",role:"listbox"},z=["onMousedown"],H=["innerHTML"],O=500,U={__name:"Autocomplete.global",props:m({autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:"Search..."},url:{type:String,required:!0},queryParam:{type:String,default:"term"},params:{type:Object,default:()=>({})},label:{type:String,default:void 0},retainInput:{type:Boolean,default:!1}},{input:{type:String,default:""},inputModifiers:{}}),emits:m(["select"],["update:input"]),setup(e,{expose:s,emit:_}){const t=e,n=B(e,"input"),x=_,u=d([]),i=d(!1),p=d(null);let f;function w(o){clearTimeout(f),o.target.value.length?f=setTimeout(()=>{i.value=!0,C.get(t.url,{params:{...t.params,[t.queryParam]:n.value}}).then(({data:c})=>{i.value=!1,u.value=c}).catch(()=>{})},O):u.value=[]}const k=o=>{x("select",o),t.retainInput?n.value=t.label?o[t.label]:o:n.value="",p.value.inputRef.blur()};function S(){p.value.inputRef.focus()}return s({setFocus:S}),(o,c)=>{const I=b("IconSearch"),M=b("InputText");return l(),r("div",R,[v("div",$,[h(I,{class:"w-4 h-4 text-gray-500"})]),h(M,{ref_key:"inputElement",ref:p,modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=a=>n.value=a),type:"text",autofocus:e.autofocus,autocomplete:"none",class:"tp-autocomplete__input block box-border w-full p-1.5 pl-10",placeholder:e.placeholder,onInput:w},null,8,["modelValue","autofocus","placeholder"]),i.value?(l(),V(P,{key:0,class:"tp-autocomplete__spinner hidden absolute top-1/2 -translate-y-1/2 right-2 h-5 w-5"})):g("",!0),u.value.length?(l(),r("ul",j,[(l(!0),r(q,null,N(u.value,a=>(l(),r("li",{key:a.id,class:"tp-autocomplete__item px-3 py-2 border-b text-xs text-base-content cursor-pointer hover:bg-secondary-color hover:bg-opacity-5 border-base-border truncate",role:"option",onMousedown:A(D=>k(a),["prevent"])},[v("span",{innerHTML:e.label?a[e.label]:a},null,8,H)],40,z))),128))])):g("",!0)])}}},J=y(U,[["__scopeId","data-v-8fc289d1"]]);export{J as default};
